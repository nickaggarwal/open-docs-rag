<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Debug Auto-Opening Issue</title>
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 20px;
        background: #f5f5f5;
      }
    </style>
  </head>
  <body>
    <h1>Debug SSE Streaming & Auto-Opening</h1>
    <p><strong>Instructions:</strong></p>
    <ol>
      <li>Open the browser console (F12)</li>
      <li>Watch for debug messages</li>
      <li>The widget should NOT open automatically</li>
      <li>Click the "Test Button" to manually trigger the widget</li>
      <li>Ask a question to test SSE streaming response</li>
    </ol>

    <!-- Test button with the ID that the widget is looking for -->
    <button
      id="ai-button-ingress-button"
      style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer"
    >
      Test Button (Should trigger widget)
    </button>

    <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 5px">
      <strong>Expected Console Output:</strong><br />
      ✅ "OpenDocsRAGWidget: Initializing with config..."<br />
      ✅ "OpenDocsRAGWidget: Modal will not open by default"<br />
      ✅ "OpenDocsRAGWidget: Custom trigger found: ai-button-ingress-button"<br />
      ❌ Should NOT see "Opening modal" messages automatically
    </div>

    <div style="margin-top: 20px; padding: 15px; background: #d1ecf1; border: 1px solid #bee5eb; border-radius: 5px">
      <strong>SSE Streaming Test:</strong><br />
      1. Click the test button to open widget<br />
      2. Ask: "What is an input schema?"<br />
      3. Should see:<br />
      ✅ Sources appear immediately<br />
      ✅ Text streams word by word with typing indicator<br />
      ✅ Typing indicator disappears when complete<br />
      ✅ Send button is disabled during streaming
    </div>

    <!-- Widget script with same config as user's -->
    <script
      async
      src="./dist/open-docs-rag-widget.bundle.js"
      data-website-id="inferless-console"
      data-project-name="Inferless Console"
      data-project-color="#1D4716"
      data-project-logo="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjMUQ0NzE2Ii8+Cjwvc3ZnPgo="
      data-modal-example-questions-title="Suggested questions:"
      data-modal-example-questions="How to deploy via CLI?, How to accept Input and return Output in app.py?, How to use python packages with Inferless?"
      data-modal-disclaimer="This is a custom LLM for answering questions about Inferless. Answers are based on the contents of the documentation. This feature is experimental - rate the answers to let us know what you think!"
      data-modal-disclaimer-bg-color="#F1FDD2"
      data-font-family="MaisonNeue-Medium,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;"
      data-modal-disclaimer-font-size="14px"
      data-modal-disclaimer-text-color="#3F4254"
      data-example-question-button-padding-x="16px"
      data-example-question-button-padding-y="8px"
      data-example-question-button-border="1px solid #DEE2E6"
      data-example-question-button-text-color="#3F4254"
      data-example-question-button-font-size="16px"
      data-modal-ask-ai-input-placeholder="Hello hi, how can I help you today?"
      data-modal-title-font-size="20px"
      data-button-hide="true"
      data-modal-override-open-id="ai-button-ingress-button"
      data-api-endpoint="http://100.28.126.254:8000/question"
    ></script>
  </body>
</html>
